{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Button}from'react-bootstrap';import{useNavigate}from'react-router-dom';import{useGame}from'./GameContext';import Swal from'sweetalert2';import\"./Timer.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PlayerClock=_ref=>{let{player,timer,toggleTimer}=_ref;// Generate initials from first and last names\nconst initials=\"\".concat(player.name.charAt(0)).concat(player.lastName?player.lastName.charAt(0):'');return/*#__PURE__*/_jsxs(\"div\",{className:\"player-clock\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"name circle \".concat(timer.isActive?'active':'inactive'),children:initials}),/*#__PURE__*/_jsx(\"h5\",{children:player.name}),/*#__PURE__*/_jsx(\"h3\",{children:new Date(timer.seconds*1000).toISOString().substr(11,8)}),/*#__PURE__*/_jsx(Button,{variant:timer.isActive?'danger':'success',onClick:()=>toggleTimer(player.name),children:timer.isActive?'Pause':'Start'})]});};function Timer(){const navigate=useNavigate();const{gameTeam}=useGame();const[timers,setTimers]=useState(gameTeam.reduce((acc,player)=>{acc[player.name]={seconds:0,isActive:false};return acc;},{}));const[gameClock,setGameClock]=useState({seconds:0,isActive:false});const toggleGameClock=()=>{setGameClock(prevGameClock=>{const newActiveState=!prevGameClock.isActive;if(!newActiveState){// If we are pausing the game clock\n// Pause all player timers\nsetTimers(prevTimers=>{const newTimers={...prevTimers};for(const key of Object.keys(newTimers)){newTimers[key]={...newTimers[key],isActive:false};}return newTimers;});}return{...prevGameClock,isActive:newActiveState};});};const toggleTimer=playerName=>{if(!gameClock.isActive){// Use SweetAlert2 for a better alert\nSwal.fire({title:'Game Clock is Paused',text:\"Start game clock to start Player Timer!\",icon:'info',confirmButtonText:'Okay'});return;}setTimers(prevTimers=>{const isActive=!prevTimers[playerName].isActive;const newTimers={...prevTimers,[playerName]:{...prevTimers[playerName],isActive}};return newTimers;});};useEffect(()=>{const interval=setInterval(()=>{let updatedTimers={...timers};if(gameClock.isActive){setGameClock(prevGameClock=>({...prevGameClock,seconds:prevGameClock.seconds+1}));}for(const[playerName,timer]of Object.entries(timers)){if(timer.isActive){updatedTimers[playerName].seconds=timer.seconds+1;}}setTimers(updatedTimers);},1000);return()=>clearInterval(interval);},[gameClock,timers]);const endGame=()=>{const playerTimesForStorage={};Object.keys(timers).forEach(playerName=>{const timeString=new Date(timers[playerName].seconds*1000).toISOString().substr(11,8);playerTimesForStorage[playerName]=timeString;});localStorage.setItem('playerTimes',JSON.stringify(playerTimesForStorage));navigate('/endGame');};return/*#__PURE__*/_jsxs(\"div\",{className:\"timer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"timer-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"game-clock\",children:[/*#__PURE__*/_jsx(\"h3\",{children:new Date(gameClock.seconds*1000).toISOString().substr(11,8)}),/*#__PURE__*/_jsx(Button,{className:\"eg-btn\",variant:gameClock.isActive?'danger':'success',onClick:toggleGameClock,children:gameClock.isActive?'Pause Game':'Start Game'})]})}),/*#__PURE__*/_jsx(\"h3\",{className:\"page-title text-center\",children:\"Player Times:\"}),/*#__PURE__*/_jsx(\"div\",{children:gameTeam.map(player=>/*#__PURE__*/_jsx(PlayerClock,{player:player,timer:timers[player.name],toggleTimer:toggleTimer},player.name))}),/*#__PURE__*/_jsx(Button,{variant:\"warning\",onClick:endGame,className:\"mt-3 pg-home-button eg-btn\",children:\"End Game\"})]});}export default Timer;","map":{"version":3,"names":["React","useState","useEffect","Button","useNavigate","useGame","Swal","jsx","_jsx","jsxs","_jsxs","PlayerClock","_ref","player","timer","toggleTimer","initials","concat","name","charAt","lastName","className","children","isActive","Date","seconds","toISOString","substr","variant","onClick","Timer","navigate","gameTeam","timers","setTimers","reduce","acc","gameClock","setGameClock","toggleGameClock","prevGameClock","newActiveState","prevTimers","newTimers","key","Object","keys","playerName","fire","title","text","icon","confirmButtonText","interval","setInterval","updatedTimers","entries","clearInterval","endGame","playerTimesForStorage","forEach","timeString","localStorage","setItem","JSON","stringify","map"],"sources":["/Users/rheashah/Documents/IntraTracker/src/Timer.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Button } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\nimport { useGame } from './GameContext';\nimport Swal from 'sweetalert2';\n\nimport \"./Timer.css\";\n\nconst PlayerClock = ({ player, timer, toggleTimer }) => {\n  // Generate initials from first and last names\n  const initials = `${player.name.charAt(0)}${player.lastName ? player.lastName.charAt(0) : ''}`;\n\n  return (\n    <div className=\"player-clock\">\n      <h3 className={`name circle ${timer.isActive ? 'active' : 'inactive'}`}>{initials}</h3>\n      <h5>{player.name}</h5>\n      <h3>{new Date(timer.seconds * 1000).toISOString().substr(11, 8)}</h3>\n      <Button variant={timer.isActive ? 'danger' : 'success'} onClick={() => toggleTimer(player.name)}>\n        {timer.isActive ? 'Pause' : 'Start'}\n      </Button>\n    </div>\n  );\n};\n\n\nfunction Timer() {\n  const navigate = useNavigate();\n  const { gameTeam } = useGame();\n\n  const [timers, setTimers] = useState(\n    gameTeam.reduce((acc, player) => {\n      acc[player.name] = { seconds: 0, isActive: false };\n      return acc;\n    }, {})\n  );\n\n  const [gameClock, setGameClock] = useState({ seconds: 0, isActive: false });\n\n  const toggleGameClock = () => {\n    setGameClock(prevGameClock => {\n        const newActiveState = !prevGameClock.isActive;\n        if (!newActiveState) { // If we are pausing the game clock\n            // Pause all player timers\n            setTimers(prevTimers => {\n                const newTimers = { ...prevTimers };\n                for (const key of Object.keys(newTimers)) {\n                    newTimers[key] = { ...newTimers[key], isActive: false };\n                }\n                return newTimers;\n            });\n        }\n        return { ...prevGameClock, isActive: newActiveState };\n    });\n  };\n\n\n  const toggleTimer = (playerName) => {\n    if (!gameClock.isActive) {\n      // Use SweetAlert2 for a better alert\n    Swal.fire({\n      title: 'Game Clock is Paused',\n      text: \"Start game clock to start Player Timer!\",\n      icon: 'info',\n      confirmButtonText: 'Okay'\n    });\n      return;\n    }\n    setTimers(prevTimers => {\n      const isActive = !prevTimers[playerName].isActive;\n      const newTimers = {\n        ...prevTimers,\n        [playerName]: { ...prevTimers[playerName], isActive }\n      };\n      return newTimers;\n    });\n  };\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      let updatedTimers = {...timers};\n\n      if (gameClock.isActive) {\n        setGameClock(prevGameClock => ({\n          ...prevGameClock,\n          seconds: prevGameClock.seconds + 1\n        }));\n      }\n\n      for (const [playerName, timer] of Object.entries(timers)) {\n        if (timer.isActive) {\n          updatedTimers[playerName].seconds = timer.seconds + 1;\n        }\n      }\n      \n      setTimers(updatedTimers);\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [gameClock, timers]);\n\n  const endGame = () => {\n    const playerTimesForStorage = {};\n    Object.keys(timers).forEach(playerName => {\n      const timeString = new Date(timers[playerName].seconds * 1000).toISOString().substr(11, 8);\n      playerTimesForStorage[playerName] = timeString;\n    });\n    localStorage.setItem('playerTimes', JSON.stringify(playerTimesForStorage));\n    navigate('/endGame');\n  };\n  \n\n  return (\n    <div className=\"timer\">\n      <div className=\"timer-container\">\n        <div className=\"game-clock\">\n          <h3>{new Date(gameClock.seconds * 1000).toISOString().substr(11, 8)}</h3>\n          <Button className=\"eg-btn\" variant={gameClock.isActive ? 'danger' : 'success'} onClick={toggleGameClock}>\n            {gameClock.isActive ? 'Pause Game' : 'Start Game'}\n          </Button>\n        </div>\n      </div>\n      <h3 className=\"page-title text-center\">Player Times:</h3>\n      <div>\n        {gameTeam.map(player => (\n          <PlayerClock key={player.name} player={player} timer={timers[player.name]} toggleTimer={toggleTimer} />\n        ))}\n      </div>\n      <Button variant=\"warning\" onClick={endGame} className=\"mt-3 pg-home-button eg-btn\">End Game</Button>\n    </div>\n  );\n}\n\nexport default Timer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}